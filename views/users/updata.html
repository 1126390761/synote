<% include head.html%>


    <div class="layui-body mymain ">
        <hr>
        <span class="layui-breadcrumb" style="visibility: visible;">
            <a href="/users">首页</a><span lay-separator="">/</span>
            <a href="/users/updata">投稿</a><span lay-separator="">/</span>
            <a><cite>投稿节目</cite></a>
          </span>
        <hr>
      
                
               
             
        <br>
        <div class="container">

            <form class="layui-form-item" id="upadata">
                <input type="hidden"  id="mainpic" name="mainpic" value="">

                <div class="layui-form-item">
                    <label class="layui-form-label">题目</label>
                    <div class="layui-input-block">
                        <div id="titleeditor" style="width:800px;"></div>
                        <textarea name="title" id="title" style="display:none" required lay-verify="required"
                            placeholder="请输入" class="layui-textarea"></textarea>
                    </div>
                </div>
                <div class="layui-form-item" style="border:1px solid black; padding:10px">
                    <label class="uploadtext">添加预览图:</label>
                    <hr style="margin:6px 0;">
                    <span class="upinput">
                    <input type="file"  name="imgs" id="imgs" class="valid" aria-invalid="false">
                    
                    
                    </span>
                    
                    
                    
                    </div>
                <div class="layui-form-item">
                    <label class="layui-form-label">分类</label>
                    <div class="layui-input-block">
                        <select name="cid" lay-verify="required">
                            <% for (let c of category){ %>
                            <option value="<%=c.cid%>">
                                <%=c.catename%>
                            </option>
                            <%}%>
                        </select>
                    </div>
                    <div class="layui-form-item">
                            <label class="layui-form-label">内容</label>
                            <div class="layui-input-block">
                                <div id="pcontenteditor" style="width:800px;"></div>
                                    <textarea name="pcontent" id="pcontent" style="display:none" required lay-verify="required" placeholder="请输入" class="layui-textarea"></textarea>
                            </div>
                        </div>
                </div>
                <div class="layui-form-item">
                    <label class="layui-form-label">关键词</label>
                    <div class="layui-input-block">
                        <input type="text" name="keywords" placeholder="多个关键词使用空格分开" autocomplete="off" class="layui-input">
                    </div>
                </div>
               
                <button class="layui-btn" type="button" lay-submit lay-filter="updata">投稿</button>
            </form>

        </div>
        <div class="clear-fix"></div>
    </div>
    <script src="http://unpkg.com/wangeditor/release/wangEditor.min.js"></script>
    <script type="text/javascript">
        window.onload = function(){
            var E = window.wangEditor;
            // 题目的编辑器
                var titleeditor = new E('#titleeditor');
                // 配置服务器端地址
                titleeditor.customConfig.uploadImgServer = '/uploads';
                titleeditor.customConfig.uploadFileName = 'images';
                // 同步内容到textarea
                var $title = $('#title');
                titleeditor.customConfig.onchange = function (html) {
                    $title.val(html);
                }
                titleeditor.create();
        
            // 照片详情
            var answereditor = new E('#pcontenteditor');
                // 配置服务器端地址
                answereditor.customConfig.uploadImgServer = '/uploads';
                answereditor.customConfig.uploadFileName = 'images';
                // 同步内容到textarea
                var $answer = $('#pcontent');
                answereditor.customConfig.onchange = function (html) {
                    $answer.val(html);
                }
                answereditor.create();

          
        }
           
        </script>
<% include foot.html%>


